Object Tracking using Particle Filtering

= Introduction =

Particle filter is a method to implement a Bayesian inference filter using Monte Carlo Simulation. It is well known that the Kalman filter provides an analytically optimal Bayesian solution for the linear/Gaussian case. Particle filter is more general, and can model non-linear/non-Gaussian case. Particle filter gained popularity for object tracking  because it was introduced as the Condensation algorithm for object tracking in the computer vision community. 

=Download=

This is a part of the [http://code.google.com/p/opencvx/ OpenCVX] library. 

Download *facetrack`*`.zip* from http://code.google.com/p/opencvx/downloads/list

This has two tracking methods, templatetrack.exe and facetrack.exe. Source codes are also available.

=How To Use=

==templatetrack.exe==

{{{
$ templatetrack.exe -sx 10 -sy 10 -sw 10 -sh 10 -sr 10 -p 100 <video_filename>
}}}

Select an initial region and use the region as a template for template matching.

{{{
Object tracking using particle filtering with simple template matching
Usage: templatetrack
 --featsize <width = 24> <height = 24>
     All image patches (template too) are resized into this size to compare.
 -p <num_particles = 100>
     Number of particles (generated tracking states).
 -sx <noise_std_for_x = 3.000000>
     The standard deviation sigma of the Gaussian window for the x coord.
     The Gaussian distribution has a good property called 68-95-99.7 rule.
     Intuitively, the searching window range is +-2sigma in 95%.
 -sy <noise_std_for_y = 3.000000>
     sigma for image patch y coord.
 -sw <noise_std_for_width = 2.000000>
     sigma for image patch width.
 -sh <noise_std_for_height = 2.000000>
     sigma for image patch height.
 -sr <noise_std_for_rotate = 1.000000>
     sigma for image patch rotation angle in degree.
 -o
     Export resulting frames
 --export_format <export_format = %s_%04d.png>
     Determine the exported filenames as sprintf.
 -h
     Show this help
 <vid_file = 02291vFF.avi | camera_index>
}}}

==facetrack.exe==

{{{
$ facetrack.exe <video_filename>
}}}

Track objects modeld by PCA. Use facetrain.exe to train PCA subspace. Although the name is facetrack.exe, this can be used for any kinds of object tracking. Tracking works well if the kinds of objects can be modeled with a PCA subspace well.

{{{
Object tracking using particle filtering with PCA DIFS + DFFS method.
Usage: facetrack
 --pcaval <pcaval_xml_path = pcaval.xml>
     Specify trained PCA model data.
 --pcavec <pcavec_xml_path = pcavec.xml>
     Specify trained PCA model data.
 --pcaavg <pcaavg_xml_path = pcaavg.xml>
     Specify trained PCA model data.
 --featsize <width> <height> (Default: (int)sqrt(pcaavg->rows) both)
     Preprocessing image size.
 -p <num_particles = 100>
     Number of particles (generated tracking states).
 -sx <noise_std_for_x = 3.000000>
     The standard deviation sigma of the Gaussian window for the x coord.
     The Gaussian distribution has a good property called 68-95-99.7 rule.
     Intuitively, the searching window range is +-2sigma in 95%.
 -sy <noise_std_for_y = 3.000000>
     sigma for image patch y coord.
 -sw <noise_std_for_width = 2.000000>
     sigma for image patch width.
 -sh <noise_std_for_height = 2.000000>
     sigma for image patch height.
 -sr <noise_std_for_rotate = 1.000000>
     sigma for image patch rotation angle in degree.
 -o
     Export resulting frames
 --export_format <export_format = %s_%04d.png>
     Determine the exported filenames as sprintf.
 -h
     Show this help
 <vid_file = 02291vFF.avi | camera_index>
}}}


==facetrain.exe==

{{{
$ facetrain.exe -featsize 24 24 -M 20 samples.txt
}}}

{{{
Train PCA subpsace.
Usage: facetrain
 --pcaval <pcaval_xml_path = pcaval.xml>
     Specify trained PCA model data.
 --pcavec <pcavec_xml_path = pcavec.xml>
     Specify trained PCA model data.
 --pcaavg <pcaavg_xml_path = pcaavg.xml>
     Specify trained PCA model data.
 --featsize <width> <height> (Default: (int)sqrt(pcaavg->rows) both)
     Preprocessing image size.
 -M <number_of_reduced_dimension = 24>
     Number of reduced feature dimensions.
 <samples_collection_file>
     A file listing image filenames
FYI:The collection file can be created as
 $ find dir/ -name '*.png' > samples.txt
}}}